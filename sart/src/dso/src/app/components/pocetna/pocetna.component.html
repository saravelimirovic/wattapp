<app-spinner *ngIf="first"></app-spinner>
<div class="pocetna">
    <h3 class="naslov">Današnja statistika <br> {{datum}}</h3>
    <!-- <div class="row2">
        
        <div class="deo">
            <div class="card-header changed" style="font-size: 15px; padding-top: 10px;">Ukupna potrošnja</div>
            <div class="card-body" style="padding-top: 5px;">
                <h5 class="card-title" style="color: #0E8388;">{{allPotr}} kWh</h5>
            </div>
            <div class="card-footer changedtext">
                <span class="fa-solid fa-arrow-{{sign1}}" [ngStyle]="{'color': razlikaPotr < 0? 'red' :'green'}"
                    style="width: 20px; margin-top: 5px;"></span>
                {{razlikaPotr}} % u odnosu na juče
            </div>
        </div>

        <div class="deo">
            <div class="card-header changed" style="font-size: 15px; padding-top: 10px;">Ukupna proizvodnja </div>
            <div class="card-body" style="padding-top: 5px;">
                <h5 class="card-title" style="color: #FFA726">{{allProiz}} kWh</h5>
            </div>
            <div class="card-footer changedtext">
                <span class="fa-solid fa-arrow-{{sign2}}" [ngStyle]="{'color': razlikaProiz < 0? 'red' :'green'}"
                    style="width: 20px; margin-top: 5px;"></span>
                {{razlikaProiz}} % u odnosu na juče
            </div>
        </div>

        <div class="deo">
            <div class="card-header" style="font-size: 15px; padding-top: 10px;">Ukupno skladišteno</div>
            <div class="card-body" style="padding-top: 5px;">
                <h5 class="card-title">111 kWh</h5>
            </div>
            <div class="card-footer changedtext">
                <span class="fa-solid fa-arrow-down" style="color: red; width: 20px; margin-top: 5px;"></span>
                -7.60% u odnosu na juče
            </div>
        </div>

        <div class="deo" (click)="openDialog()" style="cursor: pointer;">
            <div class="card-header changed" style="font-size: 15px;  padding-top: 10px; ">Broj korisnika</div>
                <h1>{{count}}</h1>  -->
    <!-- <canvas id="MyChart3" >{{ chart }}</canvas> -->

    <!-- </div>
    </div> -->


    <div class="row g-4 mb-4" id="row1">

        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">UKUPNA POTROŠNJA</h4>
                    <div class="stats-figure" style="color: #345c84">{{allPotr}} kWh</div>
                    <div class="stats-meta">
                        <span class="fa-solid fa-arrow-{{sign1}}" [ngStyle]="{'color': razlikaPotr < 0? 'red' :'green'}"
                            style="width: 20px; margin-top: 5px;"></span>
                        {{razlikaPotr}} % u odnosu na juče
                    </div>
                </div><!--//app-card-body-->
            </div><!--//app-card-->
        </div><!--//col-->

        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">UKUPNA PROIZVODNJA</h4>
                    <div class="stats-figure" style="color: #fb9b0b">{{allProiz}} kWh</div>
                    <div class="stats-meta">
                        <span class="fa-solid fa-arrow-{{sign2}}"
                            [ngStyle]="{'color': razlikaProiz < 0? 'red' :'green'}"
                            style="width: 20px; margin-top: 5px;"></span>
                        {{razlikaProiz}} % u odnosu na juče
                    </div>
                </div><!--//app-card-body-->
            </div><!--//app-card-->
        </div><!--//col-->

        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">UKUPNO SKLADIŠTENO</h4>
                    <div class="stats-figure" style="color: #588157;">{{allSkladiste}} kWh</div>
                 
                </div><!--//app-card-body-->
            </div><!--//app-card-->
        </div><!--//col-->

        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100" (click)="openDialog()" style="cursor: pointer;">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">BROJ KORISNIKA</h4>
                    <div class="stats-figure" style="color: #fff">{{count}}</div>
                    <!-- <div class="stats-meta">New</div> -->
                </div><!--//app-card-body-->
            </div><!--//app-card-->
        </div><!--//col-->

    </div><!--//row-->

    <div class="row">
        <div class="col col-6">
          <app-today-chart class="chart"></app-today-chart>
        </div>
        <div class="col col-6">
            <app-table-day class="chart"></app-table-day>
        </div>
        <!-- <hr style="color: #42A5F5;"> -->
    </div>
    <hr style="color: #42A5F5;">
    <div class="down">
        <h3 class="naslov">Zbirni prikaz potrošnje i proizvodnje električne energije u prethodnih 
            <select
                (change)="getSelectedValue($event)" name="period" id="period">
                <option value="7days">7 dana</option>
                <option value="month">mesec dana</option>
                <option value="year">godinu dana</option>
            </select>
            <p *ngIf="value=='7days'" class="opcije">Opcija prikaza: &nbsp;
                <!-- <select (change)="getSelectedValue2($event)">
                    <option value="bar">Bar chart</option>
                    <option value="line">Linijski chart</option>
                </select> -->
                <!-- <br> -->
                <input type="radio" name="graph" id="graph1" value="bar" (click)="getSelectedValue2($event)" checked><label for="graph1">&nbsp;Stubičasti</label>&nbsp;&nbsp;
                <input type="radio" name="graph" id="graph2" value="line" (click)="getSelectedValue2($event)"><label for="graph2">&nbsp;Linijski</label>
            <p>
        </h3>
        <!-- istorija -->
        <div class="row" style="display: flex; position: relative;">
            <div class="col col-6">
                <app-chart-zbir-ppi class="chart" [target]="mess"></app-chart-zbir-ppi>
            </div>
            <div class="col col-6">
                <app-history class="chart"></app-history>
            </div>
            <div class="spinner-overlay" *ngIf="showSpinner" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; justify-content: center; align-items: center;">
                <!-- Add your spinner element here -->
                <!-- For example: -->
                <div class="spinner"></div>
            </div>
        </div>
        
        <hr style="color: #42A5F5;">
        <h3 class="naslov">Zbirni prikaz potrošnje i proizvodnje električne energije u narednih 7 dana</h3>


        <div class="row">
            <div class="col col-6">
                <app-chart-zbir-ppp class="chart"></app-chart-zbir-ppp>
            </div>
            <div class="col col-6">
                <app-table-prediction7days class="chart"></app-table-prediction7days>
            </div>
        </div>
    </div>


</div>